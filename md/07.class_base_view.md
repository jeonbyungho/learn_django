# 1. CBV
- URL 패턴에 대한 요청을 처리하기 위해 클래스 사용하는 뷰이다.
- FBV와는 달리 클래스로 구현되므로, 좀 더 복잡한 애플리케이션에서 유용하게 사용될 수 있다.

## 📌ListView
- 일반적인 뷰 반환 함수
   - `django_prj/blog/urls.py`
      ```py
      urlpatterns =[path("", views.index, name='blog'),]
      ```
   - `django_prj/blog/views.py`
   ```py
   def index(request):
      posts = Post.objects.all().order_by('-pk')
      return render(request, "blog/index.html", {"posts": posts})
   ```

- 위와 동일한 기능을 하는 CBV 클래스
   - `django_prj/blog/urls.py`
      ```py
      urlpatterns =[path("", views.PostList.as_view(), name='blog'),]
      ```
   - `django_prj/blog/views.py`
      ```py
      from django.views.generic import ListView

      class PostList(ListView):
         model = Post
         template_name = "blog/index.html" # 뷰 파일 지정
         context_object_name = "posts" # 컨텍스트 이름 
         ordering = ['-pk'] # 정렬
      ```
      - `'model'`: 이 뷰에서 데이터를 표시할 모델
      - `'template_name'`: `'model_list.html'` 렌더링될 페이지의 기본 값
      - `'context_object_name'`: `'model_list'` 모델과 매핑될 컨텍스트의 키 값

### `get_context_data()`
```py
class Entity(ListView):
   def get_context_data(self, **kwargs):
      context = super(PostList, self).get_context_data()
      context['key'] = subEntity.objects.all()
      return context
```
`ListView`에서 상속된 메서드로 컨텍스트 데이터를 가져오고 반환하는 역할이다.
context(딕션너리)에 subEntity의 데이터를 저장한다.

### `post_set_count()`
```html
<ul>
{% for item in categorys %}
   <li>
      {{item.name}}({{item.relatedEntity_set.count}})
   </li>
{% endfor %}
</ul>
```
역참조를 통해 연결된 객체수를 세는 메서드이다. 모델(`Entity`)을 참조하는 다른 모델(`Category`)에서 역참조할 때 사용되는 이름이다.
   - `relatedEntity_set`: FK, ManyToMany 등 같이 관계형 필드에서 사용할 수 있다.

## 📌DetailView
- 뷰 반환 함수
   - `django_prj/blog/urls.py`
      ```py
      urlpatterns =[path("<int:post_pk>/", views.detail_post, name='detail'),]
      ```
   - `django_prj/blog/views.py`
      ```py
      def detail_post(request, post_pk):
         post = Post.objects.get(pk=post_pk)
         return render(request, "blog/detail.html", {"post": post})
      ```

- CBV 클래스
   - `django_prj/blog/urls.py`
      ```py
         urlpatterns =[path("<int:post_pk>/", views.PostDetail.as_view(), name='detail'),]
      ```
   - `django_prj/blog/views.py`
      ```py
      from django.views.generic import DetailView
      
      class PostDetail(DetailView):
         model = Post
         template_name = "blog/detail.html"
         context_object_name = "post"
         pk_url_kwarg = 'post_pk'
      ```
      - `'pk_url_kwarg'`: url에서 매핑될 pk 값 (기본 값: `'pk'`)

## 📌CreateView
## 📌UpdateView
## 📌DeleteView
## 📌TemplateView
## 📌FormView