- [ë°ì´í„° í•„ë“œ](https://docs.djangoproject.com/ko/4.2/ref/models/fields/#field-types)

# 1. ê²Œì‹œíŒ ëª¨ë¸ ìƒì„±
1. ë¨¼ì € `django_prj/settings.py`íŒŒì¼ì—ì„œ `INSTALLED_APPS`ë¥¼ ê¸°ìˆ í•´ì•¼í•œë‹¤.
1. ëª¨ë¸ í´ë˜ìŠ¤ ì‘ì„±, `django_prj/blog/models.py`
   ```py
   class Post(models.Model):
   title = models.CharField(max_length=50) # ì œëª©
   content = models.TextField() # ë‚´ìš©
   create_at = models.DateTimeField() # ì‘ì„±ì¼

   def __str__(self):
      return f'[{self.pk} {self.title}]'
      # ê´€ë¦¬ì í˜ì´ì§€ì— ë“±ë¡ëœ ëª¨ë¸ì¸ ê²½ìš° í•´ë‹¹ ëª¨ë¸ì˜ ê²Œì‹œíŒì—ì„œ PostOject(pk) ëŒ€ì‹  ë°˜í™˜ê°’ìœ¼ë¡œ ë³´ì—¬ì§€ê²Œ ëœë‹¤.
   ```
   - `class Post(models.Model)`: Post ì—”í‹°í‹° í´ë˜ìŠ¤

1. ëª¨ë¸ í´ë˜ìŠ¤ ë°˜ì˜
   ```console
   > python manage.py makemigrations
   blog/migrations/0001_initial.py
    - Create model Post
   ```
   - `blog/migrations/0001_initial.py`ì— `models.py`ì— ì‘ì„±í•œ í´ë˜ìŠ¤ ê¸°ë°˜ìœ¼ë¡œ ê¸°ìˆ ëœë‹¤.

1. ë°ì´í„° ë² ì´ìŠ¤ì— í…Œì´ë¸” ìƒì„±
   ```console
   > python manage.py migrate
   Applying ... OK
   Applying blog.0001_initial... OK
   Applying sessions.0001_initial... OK
   ```
   - ë°ì´í„° ë² ì´ìŠ¤ì— í…Œì´ë¸”ì´ ìƒì„±ëœë‹¤.

# 2. ê¸°ë³¸í‚¤ ì„¸íŒ…
- ì¥ê³  ëª¨ë¸ì—ì„œ PKë¥¼ ì •ì˜í•˜ì§€ ì•Šìœ¼ë©´, ìë™ìœ¼ë¡œ ID í•„ë“œë¥¼ ìƒì„±í•˜ê³  ì´ë¥¼ PKë¡œ ì‚¬ìš©í•œë‹¤. ID í•„ë“œëŠ” ì •ìˆ˜í˜•ì´ë©°, ìë™ìœ¼ë¡œ ì¦ê°€í•œë‹¤.

# 3. [ORM ë©”ì„œë“œ](https://docs.djangoproject.com/ko/4.2/topics/db/queries/)

## ğŸ“Œì¡°íšŒ(Select)
- `all()`: ëª¨ë“  ë°ì´í„° ë°˜í™˜
   ```py
   Entity.objects.all()
   ```
- `filter()`: í•„í„°ë§ëœ ê²°ê³¼ë¥¼ ê°€ì ¸ì˜¤ê¸°
   ```py
   Entity.objects.filter(category='news')
   ```
- `filter(field__range=(start_data, end_data))`: ë²”ìœ„ ì¡°íšŒ
   ```py
   Entity.objects.filter(created_at__range=(start_data, end_data)) # íŠ¹ì • ê¸°ê°„ ë™ì•ˆ ê°ì²´ ì¡°íšŒ
   ```
- `get()`: ë‹¨ì¼ ê°ì²´ ê°€ì ¸ì˜¤ê¸°
   ```py
   Entity.objects.get(condition)
   ```
- `order_by()`: ì •ë ¬
   ```py
   Entity.objects.all().order_by('pk') # asc
   Entity.objects.all().order_by('-pk') # desc
   Entity.objects.order_by('-create_at') # ì‘ì„±ì¼ ê¸°ì¤€ ë‚´ë¦¼ì°¨ìˆœìœ¼ë¡œ ì •ë ¬ëœ ê°ì²´ ì¡°íšŒ
   ```
- `count()` : ì¡°ê±´ì„ ë§Œì¡±í•˜ëŠ” ê°ì²´ ê°œìˆ˜ ì¡°íšŒ
   ```py
   Entity.objects.filter(category=None).count()
   ```
- `[n:m]`: ì¼ë¶€ ê°ì²´ë§Œ ì¡°íšŒ(í˜ì´ì§•)
   ```py
   Entity.objects.all()[:10]
   ```
- `values('field')`: íŠ¹ì • í•„ë“œë§Œ ì„ íƒí•´ì„œ ì¡°íšŒ
   ```py
   Entity.objects.values('field')
   ```
- `distinct()`: ì¤‘ë³µëœ ê°ì²´ ì œê±°
   ```py
   Entity.objects.values('field').distinct()
   ```

## ğŸ“Œìˆ˜ì •(Update)
- `save()`: ë°ì´í„° ë³€ê²½ì‚¬í•­ ì €ì¥
   ```py
   entry = Entry.objects.get(id=1)
   entry.title = 'title to change'
   entry.content = 'content to change'
   entry.save()
   ```

## ğŸ“Œì‚­ì œ(Delete)
-`delete()`: ë°ì´í„° ì‚­ì œ
   ```py
   entry = Entry.objects.get(id=1)
   entry.delete()
   ```

# 4. Many to Many Ralation
ëª¨ë¸ì˜ ì—¬ëŸ¬ ë ˆì½”ë“œê°€ ë‹¤ë¥¸ ëª¨ë¸ì˜ ì—¬ëŸ¬ ë ˆì½”ë“œì— ì—°ê²°ë  ìˆ˜ ìˆëŠ” ê´€ê³„ì´ë‹¤.
- `django_prj/blog/models.py`
   ```py
   class Entity(models.Model):
      tags = models.ManyToManyField(Tag, blank=True)

   class Tag(models.Model):
      name = models.CharField(max_length=50, unique=True)
      slug = models.SlugField(max_length=200, unique=True, allow_unicode=True)
   ```
   - ![](img/manytomany.jpg)
   - `Post` ê°ì²´ëŠ” `tags`ë¥¼ í†µí•´ ì—°ê²°ëœ íƒœê·¸ë“¤ì„ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë‹¤.
      ```py
      entity = Entity.objects.get(id=1)
      entity.tags.all()
      ```
   - `tag.entityname_set`ë¥¼ ì´ìš©í•´ `Tag` ê°ì²´ì™€ ì—°ê´€ëœ entity ê°ì²´ë¥¼ ë°˜í™˜ ë°›ì„ ìˆ˜ ìˆë‹¤.
      ```py
      tag = Tag.objects.get(id=1)
      entitys = tag.entityname_set.all()
      ```
   - ì—­ ì°¸ì¡° ë§¤ë‹ˆì €ë¥¼ í†µí•´ N:N ê´€ê³„ë¥¼ ì—­ë°©í–¥ìœ¼ë¡œ ì¡°íšŒí•  ìˆ˜ ìˆìœ¼ë©°, í•„ìš”ì— ë”°ë¼ ì—­ì°¸ì¡° ë§¤ë‹ˆì €ì˜ ì´ë¦„ì„ ì§ì ‘ ì„¤ì •í•  ìˆ˜ ìˆë‹¤.